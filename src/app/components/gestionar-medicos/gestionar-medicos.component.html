<app-barra-navegacion></app-barra-navegacion>

<div id="btn-agregar-pub"><h1>Mis Medicos ! &nbsp;  <button type="button" class="btn btn-success" data-toggle="modal" data-target=".bd-example-modal-lg"><i class="fas fa-plus"></i>&nbsp; Crear Medico</button></h1>
</div>


<div class="alert alert-success alert-dismissible fade show" role="alert" *ngIf="status == 'eliminado'">
     El medico ha sido eliminado con exito.
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>

<div class="alert alert-danger alert-dismissible fade show" role="alert" *ngIf="status == 'no_eliminado'">
  El medico no se puede eliminar por que tiene un servicio asociado, elimina primero el servicio.
<button type="button" class="close" data-dismiss="alert" aria-label="Close">
 <span aria-hidden="true">&times;</span>
</button>
</div>

<!-- MODAL CREAR MEDICO -->

<div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title" id="exampleModalLabel">Crear Medico</h3>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>

          <div class="modal-body">
            <app-modal-crear-medico></app-modal-crear-medico>
          </div>
    </div>
  </div>
</div>

<!-- ---------------------------------------------------------- -->

<div id="card-publicacion">   
<div class="card" *ngFor="let m of medicos">
  <div class="row">
    <div class="col-lg-3 img-medico"><img src="{{m.avatar}}" alt=""></div>
    <div class="col-lg-6">
        <h3>{{m.nombre}}</h3>
        <br>
        <p><strong>Tarjeta profecional :</strong> {{m.tarj_profecional}}</p>
        <p><strong>Titulo : </strong> {{m.titulo}}</p>
        <p><strong>No. Contacto : </strong> {{m.telefono}}</p>
        <p><strong>Whatsapp : </strong> {{m.whatsapp}}</p>
    </div>
    <div class="col-lg-3" id="btns-medico">
            <br>
              <p class="p-btns">
                  <a class="btn-info btn-lg" (click)="verMedico(m.medico_id)"><i class="far fa-eye"></i> Ver
                  </a>
              </p>
              <p class="p-btns">
                <a href="#myModal{{m.medico_id}}" role="button" class="btn-danger btn-lg" data-toggle="modal"><i class="fas fa-trash-alt"></i> Eliminar</a>
              </p>

              <!-- Modal -->
<div class="modal fade" id="myModal{{m.medico_id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalCenterTitle">Confirmación</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
         ¿ Estas seguro que deseas eliminar el medico {{m.nombre}}?
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="deleteMedico(m.medico_id)">Eliminar</button>
        </div>
      </div>
    </div>
  </div>
          </div>
  </div>
  
</div>

</div>

<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }"></ngx-loading>